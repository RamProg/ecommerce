[{"G:\\My Drive\\ESTUDIOS\\Coder\\ecommerce\\src\\index.js":"1","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\index.js":"2","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\App.js":"3","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\reportWebVitals.js":"4","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\context\\cartContext.js":"5","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\CartContainer\\CartContainer.js":"6","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemListContainer\\ItemListContainer.js":"7","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\NavBar\\NavBar.js":"8","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\Error\\Error.js":"9","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetailContainer.js":"10","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\CartContainer\\Cart\\Cart.js":"11","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\ItemList.js":"12","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\NavBar\\CartWidget\\CartWidget.js":"13","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemDetails.js":"14","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\firebase\\index.js":"15","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\Item\\Item.js":"16","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemCount\\ItemCount.js":"17"},{"size":500,"mtime":1609812483306,"results":"18","hashOfConfig":"19"},{"size":517,"mtime":1613237488846,"results":"20","hashOfConfig":"21"},{"size":1655,"mtime":1613237488824,"results":"22","hashOfConfig":"21"},{"size":375,"mtime":1613237488850,"results":"23","hashOfConfig":"21"},{"size":1064,"mtime":1613237488846,"results":"24","hashOfConfig":"21"},{"size":4286,"mtime":1613237488828,"results":"25","hashOfConfig":"21"},{"size":2444,"mtime":1613237488840,"results":"26","hashOfConfig":"21"},{"size":2757,"mtime":1613237488846,"results":"27","hashOfConfig":"21"},{"size":186,"mtime":1613237488832,"results":"28","hashOfConfig":"21"},{"size":1298,"mtime":1613237488832,"results":"29","hashOfConfig":"21"},{"size":2394,"mtime":1613237488828,"results":"30","hashOfConfig":"21"},{"size":347,"mtime":1613237488840,"results":"31","hashOfConfig":"21"},{"size":598,"mtime":1613237488844,"results":"32","hashOfConfig":"21"},{"size":2253,"mtime":1613239530425,"results":"33","hashOfConfig":"21"},{"size":560,"mtime":1613237488846,"results":"34","hashOfConfig":"21"},{"size":729,"mtime":1613237488836,"results":"35","hashOfConfig":"21"},{"size":1356,"mtime":1613239644848,"results":"36","hashOfConfig":"21"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"okt0w1",{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},"12mn42a",{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"41"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"41"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"41"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"G:\\My Drive\\ESTUDIOS\\Coder\\ecommerce\\src\\index.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\index.js",[],["75","76"],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\App.js",["77"],"import './App.css';\r\nimport { NavBar } from './components/NavBar/NavBar'\r\nimport { CartContainer } from './components/CartContainer/CartContainer'\r\nimport { Error } from './components/Error/Error'\r\nimport { ItemListContainer } from './components/ItemListContainer/ItemListContainer'\r\nimport { ItemDetailContainer } from './components/ItemDetailContainer/ItemDetailContainer'\r\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\r\nimport React from 'react'\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\r\nimport {Context} from './context/cartContext'\r\n\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <React.StrictMode>\r\n      <BrowserRouter>\r\n        <Context>\r\n          <div id=\"full\">\r\n            <NavBar />\r\n            <Switch>\r\n              <Route exact path=\"/item/:itemId\">\r\n                <ItemDetailContainer />\r\n              </Route>\r\n              // Decidí usar categoryKey en lugar de categoryId para mejorar la estética de la URL\r\n              // Me pareció que quedaba mejor que diga /spaceships en lugar de /ASn39dhweidj9328\r\n              <Route exact path=\"/categories/:categoryKey\">\r\n                <ItemListContainer greeting={\"Bienvenido a Cosmic\"} />\r\n              </Route>\r\n              <Route exact path=\"/cart\">\r\n                <CartContainer />\r\n              </Route>\r\n              <Route exact path=\"/\">\r\n                <ItemListContainer greeting={\"Bienvenido a Cosmic\"} />\r\n              </Route>\r\n              <Route path=\"/\" component={Error} />\r\n            </Switch>\r\n          </div>\r\n        </Context>\r\n      </BrowserRouter>\r\n    </React.StrictMode>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\reportWebVitals.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\context\\cartContext.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\CartContainer\\CartContainer.js",["78","79"],"import React, { useContext, useState } from 'react'\r\nimport { CartContext } from '../../context/cartContext'\r\nimport { getFirestore } from '../../firebase'\r\nimport firebase from 'firebase/app'\r\nimport '@firebase/firestore'\r\nimport { Cart } from './Cart/Cart'\r\n\r\nexport const CartContainer = () => {\r\n    const { cart, removeItem, clear } = useContext(CartContext)\r\n    const [ClientData, setClientData] = useState({})\r\n    const [orderNumber, setOrderNumber] = useState(null)\r\n\r\n\r\n    function updateName(name) { setClientData({ ...ClientData, name }) }\r\n\r\n    function updatePhone(phone) { setClientData({ ...ClientData, phone }) }\r\n\r\n    function updateMail(mail) { setClientData({ ...ClientData, mail }) }\r\n\r\n    function getTotal() {\r\n        let total = 0\r\n        cart.forEach(e => total += e.item.price * e.quantity)\r\n        return total\r\n    }\r\n\r\n    function getItems() {\r\n        return cart.map(e => ({\r\n            id: e.item.id,\r\n            title: e.item.title,\r\n            quantity: e.quantity,\r\n            price: e.item.price\r\n        }))\r\n    }\r\n    function getQuantity() {\r\n        let total = 0\r\n        cart.forEach(e => total += e.quantity)\r\n        return total\r\n    }\r\n\r\n    function updateStock(db, order) {\r\n        const items = db.collection(\"items\")\r\n        order.items.forEach(e => {\r\n            let _item = items.doc(e.id)\r\n            _item.get()\r\n                .then((doc) => {\r\n                    let oldStock = doc.data().stock\r\n                    _item.update({\r\n                        stock: oldStock - e.quantity\r\n                    })\r\n                })\r\n                .catch((err) => {\r\n                    console.log(\"There has been an error \", err)\r\n                }).finally(() => {\r\n\r\n                })\r\n        })\r\n    }\r\n\r\n    const numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\r\n\r\n    function validateName(name) {\r\n        let flag = false\r\n        if (name && name.length && !/\\d/.test(name)) flag = true\r\n        else alert(\"You must enter your full name to place an order. Only letters are allowed\")\r\n        return flag\r\n    }\r\n\r\n    function validatePhone(phone) {\r\n        let flag = false\r\n        if (phone && phone.length && /^\\d+$/.test(phone)) flag = true\r\n        else alert(\"You must enter your phone to place an order. Only numbers are allowed.\")\r\n        return flag\r\n    }\r\n    function validateMail(mail) {\r\n        let flag = false\r\n        if (mail && mail.length && mail.includes('@')) flag = true\r\n        else alert(\"You must enter a valid email.\")\r\n        return flag\r\n    }\r\n\r\n    function createOrder(e) {\r\n        e.preventDefault()\r\n        if (!validateName(ClientData.name) || !validatePhone(ClientData.phone) || !validateMail(ClientData.mail)) {\r\n            // do not create the order if some data is not validated\r\n        } else {\r\n            //create the order\r\n            setOrderNumber('loading')\r\n            const order = {\r\n                buyer: ClientData,\r\n                items: getItems(),\r\n                date: firebase.firestore.Timestamp.fromDate(new Date()),\r\n                quantity: getQuantity(),\r\n                total: getTotal()\r\n            }\r\n            const db = getFirestore()\r\n            const batch = db.batch()\r\n            const orders = db.collection(\"orders\")\r\n            orders.add(order)\r\n                .then(({ id }) => {\r\n                    const orderId = id\r\n                    updateStock(db, order)\r\n                    setOrderNumber(orderId)\r\n                }).catch(err => {\r\n                    console.log(\"There has been an error \", err)\r\n                    setOrderNumber(null)\r\n                }).finally(() => {\r\n                    batch.commit()\r\n                })\r\n\r\n        }\r\n    }\r\n\r\n    function handleDelete(id) {\r\n        removeItem(id)\r\n    }\r\n\r\n    function handleClear() {\r\n        clear()\r\n    }\r\n\r\n    function totalPrice() {\r\n        let price = 0\r\n        cart.forEach(e => price += e.item.price * e.quantity);\r\n        return price\r\n    }\r\n\r\n    return (\r\n        <Cart handleDelete={handleDelete} handleClear={handleClear} totalPrice={getTotal}\r\n            createOrder={createOrder} updateName={updateName} updatePhone={updatePhone}\r\n            updateMail={updateMail} orderNumber={orderNumber} />\r\n    )\r\n}\r\n","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemListContainer\\ItemListContainer.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\NavBar\\NavBar.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\Error\\Error.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetailContainer.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\CartContainer\\Cart\\Cart.js",["80","81","82"],"import React, { useContext, useState } from 'react'\r\nimport { CartContext } from '../../../context/cartContext'\r\nimport { Link } from 'react-router-dom'\r\nimport { getFirestore } from '../../../firebase'\r\nimport './Cart.css'\r\nimport Alert from 'react-bootstrap/Alert';\r\n\r\nexport const Cart = ({ handleDelete, handleClear, totalPrice, createOrder, updateName,\r\n    updatePhone, updateMail, orderNumber }) => {\r\n    const { cart } = useContext(CartContext)\r\n    const [order, setOrder] = useState({})\r\n\r\n    return (\r\n        <div class=\"container cart\">\r\n            <h1>This is cart</h1>\r\n            {cart.length ? <div>\r\n                <ul>\r\n                    {cart.map(e =>\r\n                        (e.item.id && e.quantity) &&\r\n                        <li key={e.item.id}>{e.item.title} x {e.quantity}: $ {e.item.price}<span> </span>\r\n                            <button onClick={() => handleDelete(e.item.id)}>Eliminar elemento</button></li>)}\r\n                </ul>\r\n                <p>Precio total: $ {totalPrice()}</p>\r\n                <button onClick={handleClear}>Vaciar carrito</button><br />\r\n                <br />\r\n                <form>\r\n                    <label for=\"name\">Name:\r\n                    <input type=\"text\" onChange={e => updateName(e.target.value)} id=\"name\"></input></label><br />\r\n                    <label for=\"phone\">Phone:\r\n                    <input type=\"text\" onChange={e => updatePhone(e.target.value)} id=\"phone\"></input></label><br />\r\n                    <label for=\"email\">Email:\r\n                    <input type=\"text\" onChange={e => updateMail(e.target.value)} id=\"email\"></input></label><br />\r\n                    <input type=\"submit\" onClick={createOrder} value=\"Finalizar la compra\" />\r\n                </form>\r\n                <br />\r\n                {orderNumber === 'loading' &&\r\n                    <Alert variant=\"dark\">\r\n                        Tu orden está siendo creada, aguarda por favor.\r\n                    </Alert>}\r\n                {(orderNumber && orderNumber !== 'loading') &&\r\n                    <Alert variant=\"success\">\r\n                        Tu orden se ha creado: {orderNumber}\r\n                    </Alert>\r\n                }\r\n            </div>\r\n                :\r\n\r\n                <p>el cart esta vacio<br />\r\n                    <Link to=\"/\">Volver al Inicio</Link></p>\r\n            }\r\n        </div>\r\n    )\r\n}","C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\ItemList.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\NavBar\\CartWidget\\CartWidget.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemDetails.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\firebase\\index.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\Item\\Item.js",[],"C:\\Users\\ALDEBARAN\\Code\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemCount\\ItemCount.js",["83"],{"ruleId":"84","replacedBy":"85"},{"ruleId":"86","replacedBy":"87"},{"ruleId":"88","severity":1,"message":"89","line":24,"column":23,"nodeType":"90","endLine":27,"endColumn":15},{"ruleId":"91","severity":1,"message":"92","line":59,"column":11,"nodeType":"93","messageId":"94","endLine":59,"endColumn":18},{"ruleId":"91","severity":1,"message":"95","line":121,"column":14,"nodeType":"93","messageId":"94","endLine":121,"endColumn":24},{"ruleId":"91","severity":1,"message":"96","line":4,"column":10,"nodeType":"93","messageId":"94","endLine":4,"endColumn":22},{"ruleId":"91","severity":1,"message":"97","line":11,"column":12,"nodeType":"93","messageId":"94","endLine":11,"endColumn":17},{"ruleId":"91","severity":1,"message":"98","line":11,"column":19,"nodeType":"93","messageId":"94","endLine":11,"endColumn":27},{"ruleId":"99","severity":1,"message":"100","line":13,"column":6,"nodeType":"101","endLine":13,"endColumn":8,"suggestions":"102"},"no-native-reassign",["103"],"no-negated-in-lhs",["104"],"react/jsx-no-comment-textnodes","Comments inside children section of tag should be placed inside braces","Literal","no-unused-vars","'numbers' is assigned a value but never used.","Identifier","unusedVar","'totalPrice' is defined but never used.","'getFirestore' is defined but never used.","'order' is assigned a value but never used.","'setOrder' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'initial'. Either include it or remove the dependency array.","ArrayExpression",["105"],"no-global-assign","no-unsafe-negation",{"desc":"106","fix":"107"},"Update the dependencies array to be: [initial]",{"range":"108","text":"109"},[395,397],"[initial]"]