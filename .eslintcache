[{"E:\\ORT\\Coder\\ecommerce\\src\\index.js":"1","E:\\ORT\\Coder\\ecommerce\\src\\App.js":"2","E:\\ORT\\Coder\\ecommerce\\src\\reportWebVitals.js":"3","E:\\ORT\\Coder\\ecommerce\\src\\components\\NavBar\\NavBar.js":"4","E:\\ORT\\Coder\\ecommerce\\src\\components\\Error\\Error.js":"5","E:\\ORT\\Coder\\ecommerce\\src\\context\\cartContext.js":"6","E:\\ORT\\Coder\\ecommerce\\src\\components\\NavBar\\CartWidget\\CartWidget.js":"7","E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemListContainer\\ItemListContainer.js":"8","E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetailContainer.js":"9","E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemDetails.js":"10","E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\ItemList.js":"11","E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\Item\\Item.js":"12","E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemCount\\ItemCount.js":"13","E:\\ORT\\Coder\\ecommerce\\src\\firebase\\index.js":"14","E:\\ORT\\Coder\\ecommerce\\src\\components\\CartContainer\\CartContainer.js":"15","E:\\ORT\\Coder\\ecommerce\\src\\components\\CartContainer\\Cart\\Cart.js":"16"},{"size":500,"mtime":1609812483306,"results":"17","hashOfConfig":"18"},{"size":1610,"mtime":1612885723754,"results":"19","hashOfConfig":"18"},{"size":362,"mtime":499162500000,"results":"20","hashOfConfig":"18"},{"size":2757,"mtime":1612914923738,"results":"21","hashOfConfig":"18"},{"size":186,"mtime":1611189257074,"results":"22","hashOfConfig":"18"},{"size":1064,"mtime":1612914788888,"results":"23","hashOfConfig":"18"},{"size":598,"mtime":1612914977520,"results":"24","hashOfConfig":"18"},{"size":2444,"mtime":1612455911594,"results":"25","hashOfConfig":"18"},{"size":1298,"mtime":1612451853496,"results":"26","hashOfConfig":"18"},{"size":1940,"mtime":1612914956110,"results":"27","hashOfConfig":"18"},{"size":347,"mtime":1612231601238,"results":"28","hashOfConfig":"18"},{"size":729,"mtime":1612231733693,"results":"29","hashOfConfig":"18"},{"size":1233,"mtime":1612310589768,"results":"30","hashOfConfig":"18"},{"size":539,"mtime":1612618185759,"results":"31","hashOfConfig":"18"},{"size":4286,"mtime":1612986756960,"results":"32","hashOfConfig":"18"},{"size":2394,"mtime":1612914835791,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1sk00ol",{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"36"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"36"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"36"},"E:\\ORT\\Coder\\ecommerce\\src\\index.js",[],["71","72"],"E:\\ORT\\Coder\\ecommerce\\src\\App.js",["73"],"import './App.css';\nimport { NavBar } from './components/NavBar/NavBar'\nimport { CartContainer } from './components/CartContainer/CartContainer'\nimport { Error } from './components/Error/Error'\nimport { ItemListContainer } from './components/ItemListContainer/ItemListContainer'\nimport { ItemDetailContainer } from './components/ItemDetailContainer/ItemDetailContainer'\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\nimport React from 'react'\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\nimport {Context} from './context/cartContext'\n\n\nfunction App() {\n\n  return (\n    <React.StrictMode>\n      <BrowserRouter>\n        <Context>\n          <div id=\"full\">\n            <NavBar />\n            <Switch>\n              <Route exact path=\"/item/:itemId\">\n                <ItemDetailContainer />\n              </Route>\n              // Decidí usar categoryKey en lugar de categoryId para mejorar la estética de la URL\n              // Me pareció que quedaba mejor que diga /spaceships en lugar de /ASn39dhweidj9328\n              <Route exact path=\"/categories/:categoryKey\">\n                <ItemListContainer greeting={\"Bienvenido a Cosmic\"} />\n              </Route>\n              <Route exact path=\"/cart\">\n                <CartContainer />\n              </Route>\n              <Route exact path=\"/\">\n                <ItemListContainer greeting={\"Bienvenido a Cosmic\"} />\n              </Route>\n              <Route path=\"/\" component={Error} />\n            </Switch>\n          </div>\n        </Context>\n      </BrowserRouter>\n    </React.StrictMode>\n  );\n}\n\nexport default App;\n","E:\\ORT\\Coder\\ecommerce\\src\\reportWebVitals.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\NavBar\\NavBar.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\Error\\Error.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\context\\cartContext.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\NavBar\\CartWidget\\CartWidget.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemListContainer\\ItemListContainer.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetailContainer.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemDetails.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\ItemList.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemListContainer\\ItemList\\Item\\Item.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\ItemDetailContainer\\ItemDetails\\ItemCount\\ItemCount.js",[],["74","75"],"E:\\ORT\\Coder\\ecommerce\\src\\firebase\\index.js",[],"E:\\ORT\\Coder\\ecommerce\\src\\components\\CartContainer\\CartContainer.js",["76","77"],"import React, { useContext, useState } from 'react'\r\nimport { CartContext } from '../../context/cartContext'\r\nimport { getFirestore } from '../../firebase'\r\nimport firebase from 'firebase/app'\r\nimport '@firebase/firestore'\r\nimport { Cart } from './Cart/Cart'\r\n\r\nexport const CartContainer = () => {\r\n    const { cart, removeItem, clear } = useContext(CartContext)\r\n    const [ClientData, setClientData] = useState({})\r\n    const [orderNumber, setOrderNumber] = useState(null)\r\n\r\n\r\n    function updateName(name) { setClientData({ ...ClientData, name }) }\r\n\r\n    function updatePhone(phone) { setClientData({ ...ClientData, phone }) }\r\n\r\n    function updateMail(mail) { setClientData({ ...ClientData, mail }) }\r\n\r\n    function getTotal() {\r\n        let total = 0\r\n        cart.forEach(e => total += e.item.price * e.quantity)\r\n        return total\r\n    }\r\n\r\n    function getItems() {\r\n        return cart.map(e => ({\r\n            id: e.item.id,\r\n            title: e.item.title,\r\n            quantity: e.quantity,\r\n            price: e.item.price\r\n        }))\r\n    }\r\n    function getQuantity() {\r\n        let total = 0\r\n        cart.forEach(e => total += e.quantity)\r\n        return total\r\n    }\r\n\r\n    function updateStock(db, order) {\r\n        const items = db.collection(\"items\")\r\n        order.items.forEach(e => {\r\n            let _item = items.doc(e.id)\r\n            _item.get()\r\n                .then((doc) => {\r\n                    let oldStock = doc.data().stock\r\n                    _item.update({\r\n                        stock: oldStock - e.quantity\r\n                    })\r\n                })\r\n                .catch((err) => {\r\n                    console.log(\"There has been an error \", err)\r\n                }).finally(() => {\r\n\r\n                })\r\n        })\r\n    }\r\n\r\n    const numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\r\n\r\n    function validateName(name) {\r\n        let flag = false\r\n        if (name && name.length && !/\\d/.test(name)) flag = true\r\n        else alert(\"You must enter your full name to place an order. Only letters are allowed\")\r\n        return flag\r\n    }\r\n\r\n    function validatePhone(phone) {\r\n        let flag = false\r\n        if (phone && phone.length && /^\\d+$/.test(phone)) flag = true\r\n        else alert(\"You must enter your phone to place an order. Only numbers are allowed.\")\r\n        return flag\r\n    }\r\n    function validateMail(mail) {\r\n        let flag = false\r\n        if (mail && mail.length && mail.includes('@')) flag = true\r\n        else alert(\"You must enter a valid email.\")\r\n        return flag\r\n    }\r\n\r\n    function createOrder(e) {\r\n        e.preventDefault()\r\n        if (!validateName(ClientData.name) || !validatePhone(ClientData.phone) || !validateMail(ClientData.mail)) {\r\n            // do not create the order if some data is not validated\r\n        } else {\r\n            //create the order\r\n            setOrderNumber('loading')\r\n            const order = {\r\n                buyer: ClientData,\r\n                items: getItems(),\r\n                date: firebase.firestore.Timestamp.fromDate(new Date()),\r\n                quantity: getQuantity(),\r\n                total: getTotal()\r\n            }\r\n            const db = getFirestore()\r\n            const batch = db.batch()\r\n            const orders = db.collection(\"orders\")\r\n            orders.add(order)\r\n                .then(({ id }) => {\r\n                    const orderId = id\r\n                    updateStock(db, order)\r\n                    setOrderNumber(orderId)\r\n                }).catch(err => {\r\n                    console.log(\"There has been an error \", err)\r\n                    setOrderNumber(null)\r\n                }).finally(() => {\r\n                    batch.commit()\r\n                })\r\n\r\n        }\r\n    }\r\n\r\n    function handleDelete(id) {\r\n        removeItem(id)\r\n    }\r\n\r\n    function handleClear() {\r\n        clear()\r\n    }\r\n\r\n    function totalPrice() {\r\n        let price = 0\r\n        cart.forEach(e => price += e.item.price * e.quantity);\r\n        return price\r\n    }\r\n\r\n    return (\r\n        <Cart handleDelete={handleDelete} handleClear={handleClear} totalPrice={getTotal}\r\n            createOrder={createOrder} updateName={updateName} updatePhone={updatePhone}\r\n            updateMail={updateMail} orderNumber={orderNumber} />\r\n    )\r\n}\r\n","E:\\ORT\\Coder\\ecommerce\\src\\components\\CartContainer\\Cart\\Cart.js",["78","79","80"],"import React, { useContext, useState } from 'react'\r\nimport { CartContext } from '../../../context/cartContext'\r\nimport { Link } from 'react-router-dom'\r\nimport { getFirestore } from '../../../firebase'\r\nimport './Cart.css'\r\nimport Alert from 'react-bootstrap/Alert';\r\n\r\nexport const Cart = ({ handleDelete, handleClear, totalPrice, createOrder, updateName,\r\n    updatePhone, updateMail, orderNumber }) => {\r\n    const { cart } = useContext(CartContext)\r\n    const [order, setOrder] = useState({})\r\n\r\n    return (\r\n        <div class=\"container cart\">\r\n            <h1>This is cart</h1>\r\n            {cart.length ? <div>\r\n                <ul>\r\n                    {cart.map(e =>\r\n                        (e.item.id && e.quantity) &&\r\n                        <li key={e.item.id}>{e.item.title} x {e.quantity}: $ {e.item.price}<span> </span>\r\n                            <button onClick={() => handleDelete(e.item.id)}>Eliminar elemento</button></li>)}\r\n                </ul>\r\n                <p>Precio total: $ {totalPrice()}</p>\r\n                <button onClick={handleClear}>Vaciar carrito</button><br />\r\n                <br />\r\n                <form>\r\n                    <label for=\"name\">Name:\r\n                    <input type=\"text\" onChange={e => updateName(e.target.value)} id=\"name\"></input></label><br />\r\n                    <label for=\"phone\">Phone:\r\n                    <input type=\"text\" onChange={e => updatePhone(e.target.value)} id=\"phone\"></input></label><br />\r\n                    <label for=\"email\">Email:\r\n                    <input type=\"text\" onChange={e => updateMail(e.target.value)} id=\"email\"></input></label><br />\r\n                    <input type=\"submit\" onClick={createOrder} value=\"Finalizar la compra\" />\r\n                </form>\r\n                <br />\r\n                {orderNumber === 'loading' &&\r\n                    <Alert variant=\"dark\">\r\n                        Tu orden está siendo creada, aguarda por favor.\r\n                    </Alert>}\r\n                {(orderNumber && orderNumber !== 'loading') &&\r\n                    <Alert variant=\"success\">\r\n                        Tu orden se ha creado: {orderNumber}\r\n                    </Alert>\r\n                }\r\n            </div>\r\n                :\r\n\r\n                <p>el cart esta vacio<br />\r\n                    <Link to=\"/\">Volver al Inicio</Link></p>\r\n            }\r\n        </div>\r\n    )\r\n}",{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","replacedBy":"84"},{"ruleId":"85","severity":1,"message":"86","line":24,"column":23,"nodeType":"87","endLine":27,"endColumn":15},{"ruleId":"81","replacedBy":"88"},{"ruleId":"83","replacedBy":"89"},{"ruleId":"90","severity":1,"message":"91","line":59,"column":11,"nodeType":"92","messageId":"93","endLine":59,"endColumn":18},{"ruleId":"90","severity":1,"message":"94","line":121,"column":14,"nodeType":"92","messageId":"93","endLine":121,"endColumn":24},{"ruleId":"90","severity":1,"message":"95","line":4,"column":10,"nodeType":"92","messageId":"93","endLine":4,"endColumn":22},{"ruleId":"90","severity":1,"message":"96","line":11,"column":12,"nodeType":"92","messageId":"93","endLine":11,"endColumn":17},{"ruleId":"90","severity":1,"message":"97","line":11,"column":19,"nodeType":"92","messageId":"93","endLine":11,"endColumn":27},"no-native-reassign",["98"],"no-negated-in-lhs",["99"],"react/jsx-no-comment-textnodes","Comments inside children section of tag should be placed inside braces","Literal",["98"],["99"],"no-unused-vars","'numbers' is assigned a value but never used.","Identifier","unusedVar","'totalPrice' is defined but never used.","'getFirestore' is defined but never used.","'order' is assigned a value but never used.","'setOrder' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]